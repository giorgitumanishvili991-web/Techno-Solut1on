<!doctype html>
<html lang="ka">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TechnoSolution</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    :root{
      --brand:#0a74da;
      --ink:#0f1724;
      --muted:rgba(31,41,55,0.72);
      --paper:#ffffff;
      --accent: #6fb1ff;
      --ok:#22a55e;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--ink);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      /* multi-layer background:
         1) soft gradient
         2) subtle repeating SVG circuit pattern
         3) animated translucent floating shapes via pseudo-element (see .bg-anim) */
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(10,116,218,0.06), transparent 6%),
        radial-gradient(900px 500px at 90% 85%, rgba(107,185,255,0.04), transparent 12%),
        linear-gradient(180deg,#f6fbff 0%, #eef6ff 100%),
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><g fill='none' stroke='%230a74da' stroke-opacity='0.06' stroke-width='1'><rect x='6' y='6' width='36' height='36' rx='3'/><rect x='78' y='6' width='36' height='36' rx='3'/><rect x='6' y='78' width='36' height='36' rx='3'/><path d='M42 24h36M24 42v36M96 42v36M42 96h36' stroke-opacity='0.04'/></g></svg>");
      background-repeat: repeat;
      background-size: auto;
      position:relative;
      min-height:100%;
    }

    /* floating animated overlay */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background-image: radial-gradient(circle at 10% 20%, rgba(10,116,218,0.06), transparent 6%),
                        radial-gradient(circle at 80% 80%, rgba(107,185,255,0.04), transparent 8%);
      z-index:0;
      mix-blend-mode: screen;
      animation: floatBG 20s linear infinite;
      opacity:0.95;
    }
    @keyframes floatBG{
      0%{transform:translateY(0) scale(1)}
      50%{transform:translateY(-8px) scale(1.02)}
      100%{transform:translateY(0) scale(1)}
    }

    /* page layout */
    header{
      position:relative;
      z-index:5;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:14px;
      padding:18px;
      margin:12px;
      border-radius:12px;
      background: linear-gradient(90deg, rgba(255,255,255,0.9), rgba(250,252,255,0.85));
      box-shadow: 0 10px 30px rgba(8,30,60,0.06);
      backdrop-filter: blur(4px);
    }
    .logo{width:68px;height:68px;border-radius:12px;overflow:hidden;flex:0 0 68px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--brand),var(--accent));box-shadow:0 6px 18px rgba(10,20,40,0.06)}
    .logo img{width:100%;height:100%;object-fit:cover;display:block}
    header h1{margin:0;font-size:1.45rem;color:var(--brand)}
    header p{margin:2px 0 0 0;color:var(--muted);font-size:0.95rem}

    nav{display:flex;justify-content:flex-end;padding:10px 22px;gap:8px;position:relative;z-index:5}
    .nav-btn{background:none;border:1px solid rgba(10,116,218,0.12);color:var(--brand);padding:8px 12px;border-radius:10px;cursor:pointer}
    .nav-btn:hover{background:rgba(10,116,218,0.06)}

    .container{max-width:1150px;margin:10px auto;padding:0 18px;position:relative;z-index:5}

    /* auth forms area */
    .auth-wrapper{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin:12px 0}
    .auth-container{background:var(--paper);padding:14px;border-radius:12px;box-shadow:0 10px 28px rgba(8,30,60,0.06);width:280px}
    .auth-container h3{margin:0 0 8px 0;color:var(--brand)}
    input,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(5,60,120,0.06);margin:8px 0;background:white}
    .submit-btn{background:var(--ok);color:white;padding:10px;border-radius:10px;border:none;cursor:pointer}

    /* hero */
    .hero{border-radius:14px;overflow:hidden;position:relative;box-shadow:0 12px 40px rgba(8,30,60,0.08);background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(250,252,255,0.85));padding:10px}
    .hero video{display:block;width:100%;height:auto;border-radius:8px}
    .hero-text{font-size:1.7rem;font-weight:800;text-align:center;padding:14px 8px;color:var(--brand)}
    .hero-sub{color:var(--muted);text-align:center;margin-top:6px;font-size:1rem}

    .media-row{display:flex;gap:18px;flex-wrap:wrap;margin-top:18px;align-items:flex-start;justify-content:center}
    .media-card{background:linear-gradient(180deg,#ffffff,#fbfeff);padding:12px;border-radius:12px;box-shadow:0 10px 30px rgba(8,30,60,0.06);flex:1 1 420px;max-width:520px}
    .media-card img{width:100%;height:auto;border-radius:10px}
    .media-caption{font-weight:700;color:var(--brand);text-align:center;margin-top:10px}
    .media-note{color:var(--muted);text-align:center;margin-top:8px}

    /* info blocks */
    .info-block{background:linear-gradient(180deg,#fff,#fbfeff);padding:14px;border-radius:12px;box-shadow:0 8px 20px rgba(8,30,60,0.04);margin-bottom:12px}
    .info-block h4{margin:0 0 8px 0;color:var(--brand)}
    .info-block p{margin:0;color:var(--muted);line-height:1.5}

    /* services */
    h2.section-title{text-align:center;color:var(--brand);margin-top:32px}
    .services{display:flex;gap:18px;flex-wrap:wrap;justify-content:center;margin-top:14px}
    .service{background:linear-gradient(180deg,#ffffff,#f7fbff);padding:18px;border-radius:12px;max-width:260px;flex:1 1 220px;text-align:center;box-shadow:0 10px 30px rgba(8,30,60,0.06)}
    .service i{font-size:42px;color:var(--brand);margin-bottom:8px}
    .service p.small{color:var(--muted);margin:6px 0}
    .price-details{display:none;margin-top:10px;color:var(--muted);font-weight:600}
    .price-btn{margin-top:10px;padding:8px 12px;border-radius:10px;border:2px solid var(--ok);color:var(--ok);background:none;cursor:pointer;font-weight:700}
    .price-btn:hover{background:var(--ok);color:white}

    /* reviews */
    .reviews{margin-top:22px}
    .comment-item{background:#f2fbff;border:1px solid #dff4ff;padding:10px;border-radius:10px;margin:8px 0}

    /* chat/admin */
    #chat-container{position:fixed;right:22px;bottom:22px;z-index:9999}
    #chat-button{background:var(--brand);color:white;padding:12px 14px;border-radius:999px;cursor:pointer;box-shadow:0 10px 28px rgba(10,116,218,0.18)}
    #chat-box{display:none;width:360px;max-height:520px;background:white;border-radius:12px;overflow:hidden;box-shadow:0 12px 36px rgba(8,30,60,0.12)}
    #chat-header{background:var(--brand);color:white;padding:12px;display:flex;justify-content:space-between;align-items:center}
    #chat-messages{padding:12px;max-height:380px;overflow:auto;background:linear-gradient(180deg,#fbfeff,#f7fbff)}
    .message{padding:8px 10px;border-radius:10px;margin:8px 0}
    .message.user{background:#e8faff}
    .message.admin{background:var(--brand);color:white}

    /* responsive tweaks */
    @media (max-width:900px){
      .hero-text{font-size:1.25rem}
      header{padding:12px;margin:8px}
      .services{gap:12px}
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo" title="TechnoSolution">
      <img src="Video/logo.jpg" alt="logo" onerror="this.style.display='block';this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2268%22 height=%2268%22><rect width=%2268%22 height=%2268%22 fill=%230a74da/><text x=%2234%22 y=%2242%22 fill=%22white%22 font-size=%2226%22 font-family=%22sans-serif%22 text-anchor=%22middle%22>TS</text></svg>'" />
    </div>
    <div>
      <h1>TechnoSolution</h1>
      <p>ტექნოლოგიები, რომლებსაც შეგიძლია ენდო</p>
    </div>
  </header>

  <nav>
    <div id="nav-right"></div>
  </nav>

  <!-- AUTH TOGGLER (hidden until clicked) -->
  <div class="auth-wrapper container" id="auth-area" style="display:none">
    <div class="auth-container" id="login-form">
      <h3>ავტორიზაცია</h3>
      <input id="login-name" placeholder="სახელი" />
      <input id="login-pass" type="password" placeholder="პაროლი" />
      <button class="submit-btn" onclick="loginUser()">შესვლა</button>
      <div style="margin-top:8px;color:var(--muted);font-size:0.9rem">ადმინი: GoldenIT (პაროლი შენს მიერ შემოთავაზებული)</div>
    </div>
    <div class="auth-container" id="register-form">
      <h3>რეგისტრაცია</h3>
      <input id="reg-name" placeholder="სახელი" />
      <input id="reg-pass" type="password" placeholder="პაროლი" />
      <button class="submit-btn" onclick="registerUser()">რეგისტრაცია</button>
      <div style="margin-top:8px;color:var(--muted);font-size:0.9rem">რეგისტრაციის შემდეგ შეძლებთ შეფასების და მესიჯის გაგზავნას.</div>
    </div>
  </div>

  <!-- MAIN -->
  <main class="container">
    <section class="hero">
      <div style="position:relative">
        <video id="heroVideo" src="Video/video.mp4" playsinline autoplay muted loop onerror="this.style.display='none'"></video>
      </div>
      <div class="hero-text">დღეს რამდენად მნიშვნელოვანია ტექნოლოგიები</div>
      <div class="hero-sub">ტექნოლოგიური გადაწყვეტები აჩქარებენ ბიზნესს, ზრდიან უსაფრთხოებას და ამარტივებენ ყოველდღიურობას.</div>
    </section>

    <div class="media-row">
      <div class="media-card">
        <img id="cameraPhoto" src="Video/photo.jpg" alt="ვიდეოკამერები" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22500%22 height=%22300%22><rect width=%22500%22 height=%22300%22 fill=%23eaf6ff/><text x=%22250%22 y=%22150%22 font-size=%2220%22 font-family=%22sans-serif%22 text-anchor=%22middle%22 fill=%230a74da%22>Photo not found</text></svg>'" />
        <div class="media-caption">ვიდეოკამერები &amp; უსაფრთხოება</div>
        <div class="media-note">ვიდეოკამერები არ არის მხოლოდ ჩანაწერი — ეს არის პრევენცია, მტკიცებულება და მშვიდობის გარანტია.</div>
      </div>

      <div style="flex:1 1 420px;max-width:520px;display:flex;flex-direction:column;gap:12px;justify-content:center">
        <div class="info-block">
          <h4>რატომ არის უსაფრთხოება აუცილებელი?</h4>
          <p>ვიდეოკამერები უზრუნველყოფენ რეალურ დროში მონიტორინგს, <strong>ამცირებენ</strong> დანაშაულს და გაძლევენ წვდომას გადარჩენისა და ანალიზის საშუალებებზე.</p>
        </div>

        <div class="info-block">
          <h4>რამდენად საჭიროა დღეს ანტივირუსები?</h4>
          <p>ანტივირუსები იცავს თქვენს მონაცემებს, აღკვეთს საფრთხეებს და უზრუნველყოფს უსაფრთხო ონლაინ მუშაობას. ისინი აუცილებელია როგორც კომპანიებისთვის, ისე პირადი მომხმარებლებისთვის.</p>
        </div>

        <div class="info-block">
          <h4>რამდენად მნიშვნელოვანია კომპიუტერული ტექნიკა?</h4>
          <p>კომპიუტერული ტექნიკა ზრდის პროდუქტიულობას, აჩქარებს პროცესებს და ამცირებს ტექნიკურ შენელებებს — კარგი ტექნიკა არის ბიზნესის წინსვლის საფუძველი.</p>
        </div>
      </div>
    </div>

    <h2 class="section-title">სერვისები</h2>
    <div class="services">
      <div class="service">
        <i class="fa-solid fa-laptop-code"></i>
        <h3>კომპიუტერული მომსახურება</h3>
        <p class="small">დაჭრა, მოვლა, ოპტიმიზაცია</p>
        <button class="price-btn" data-target="price1">ფასები</button>
        <div class="price-details" id="price1">საშუალო ფასი თბილისში: <strong>50 ₾ — 120 ₾</strong></div>
      </div>

      <div class="service">
        <i class="fa-solid fa-network-wired"></i>
        <h3>სისტემური აუდიტი</h3>
        <p class="small">ბიზნესის ინფრასტრუქტურის შემოწმება</p>
        <button class="price-btn" data-target="price2">ფასები</button>
        <div class="price-details" id="price2">საშუალო ფასი თბილისში: <strong>120 ₾ — 300 ₾</strong></div>
      </div>

      <div class="service">
        <i class="fa-solid fa-camera"></i>
        <h3>ვიდეო-უსაფრთხოების სისტემები</h3>
        <p class="small">დაცვა, მონიტორინგი, ჩანაწერი</p>
        <button class="price-btn" data-target="price3">ფასები</button>
        <div class="price-details" id="price3">საშუალო ფასი თბილისში: <strong>180 ₾ — 450 ₾</strong></div>
      </div>

      <div class="service">
        <i class="fa-solid fa-shield-halved"></i>
        <h3>სისტემების დაცვა &amp; ბერკერები</h3>
        <p class="small">პარეტის დაცვა და აღდგენა</p>
        <button class="price-btn" data-target="price4">ფასები</button>
        <div class="price-details" id="price4">საშუალო ფასი თბილისში: <strong>200 ₾ — 400 ₾</strong></div>
      </div>
    </div>

    <div class="reviews">
      <button class="nav-btn" onclick="toggleExpandable('reviews-area')">შეფასებები <span id="reviews-count" style="margin-left:8px;color:var(--brand);font-weight:700">0</span></button>

      <div id="reviews-area" style="display:block;margin-top:12px">
        <div id="reviews-list" style="margin-top:8px"></div>

        <div style="margin-top:12px">
          <textarea id="reviewtext" placeholder="თქვენი შეფასება (საჭიროა ავტორიზაცია)"></textarea>
          <button id="review-submit" class="submit-btn" onclick="addReview()" disabled>გაგზავნა</button>
          <div class="small" id="review-hint">შეფასების დასაწერად გაიარეთ ავტორიზაცია.</div>
        </div>
      </div>
    </div>

    <div style="height:40px"></div>
  </main>

  <!-- chat/admin -->
  <div id="chat-container">
    <div id="chat-button" onclick="toggleChat()">Message</div>
    <div id="chat-box" style="display:none">
      <div id="chat-header">
        <div style="font-weight:700">შეტყობინება</div>
        <div id="chat-mode" style="background:#e8f2ff;color:#2457a1;padding:6px 10px;border-radius:999px;font-weight:700">სტატუსი</div>
      </div>
      <div id="chat-messages"></div>
      <div style="padding:8px">
        <input id="chat-input" placeholder="შენი შეტყობინება..." style="width:100%;padding:8px;border:1px solid #eee;border-radius:8px"/>
        <div style="height:8px"></div>
        <button id="chat-send" class="submit-btn" style="width:100%" onclick="sendMessage()">გაგზავნა</button>
      </div>
    </div>
  </div>

<script>
/* ============================
   Auth + storage + helpers
   (same logic as before; final and stable)
   ============================ */

const ADMIN_USER = 'GoldenIT';
const ADMIN_PASS_HASH = '8a6642a654b9f1a233d97331885e96ebd5f443ec86df8398424e014153720cbe';

let currentUser = JSON.parse(sessionStorage.getItem('currentUser') || 'null');

function getUsers(){ return JSON.parse(localStorage.getItem('users') || '[]'); }
function setUsers(u){ localStorage.setItem('users', JSON.stringify(u)); }

async function sha256Hex(str){
  const enc = new TextEncoder();
  const buf = await crypto.subtle.digest('SHA-256', enc.encode(str));
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
}

function renderNav(){
  const holder = document.getElementById('nav-right');
  holder.innerHTML = '';
  const authToggle = document.createElement('button');
  authToggle.className='nav-btn';
  authToggle.textContent = 'ავტორიზაცია/რეგისტრაცია';
  authToggle.onclick = ()=> {
    const area = document.getElementById('auth-area');
    area.style.display = area.style.display==='none' ? 'flex' : 'none';
    if(area.style.display!=='none') area.scrollIntoView({behavior:'smooth'});
  };
  holder.appendChild(authToggle);

  if(currentUser){
    const span = document.createElement('span');
    span.style.marginRight='10px';
    span.style.color='var(--brand)';
    span.textContent = `მოგესალმებით, ${currentUser.name}` + (currentUser.admin ? ' (Admin)' : '');
    holder.appendChild(span);
    const out = document.createElement('button');
    out.className='nav-btn'; out.textContent='გასვლა';
    out.onclick = logout;
    holder.appendChild(out);
  }
}

function toggleExpandable(id){
  const el = document.getElementById(id);
  if(!el) return;
  el.style.display = (getComputedStyle(el).display === 'none') ? 'block' : 'none';
}

async function registerUser(){
  const name = document.getElementById('reg-name').value.trim();
  const pass = document.getElementById('reg-pass').value;
  if(!name || !pass){ alert('შეავსეთ ყველა ველი'); return; }
  if(name === ADMIN_USER){ alert('ეს სახელი დაკავებულია'); return; }
  const users = getUsers();
  if(users.find(u=>u.name===name)){ alert('სახელი უკვე არსებობს'); return; }
  const passHash = await sha256Hex(pass);
  users.push({name, passHash});
  setUsers(users);
  currentUser = {name, admin:false};
  sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
  document.getElementById('auth-area').style.display='none';
  renderNav(); applyAuthState();
  alert('რეგისტრაცია დასრულდა — შემოხვედით როგორც '+name);
}

async function loginUser(){
  const name = document.getElementById('login-name').value.trim();
  const pass = document.getElementById('login-pass').value;
  if(!name || !pass){ alert('შეავსეთ ყველა ველი'); return; }
  const passHash = await sha256Hex(pass);
  if(name === ADMIN_USER){
    if(passHash === ADMIN_PASS_HASH){
      currentUser = {name, admin:true};
    } else { alert('არასწორი მონაცემები'); return; }
  } else {
    const users = getUsers();
    const found = users.find(u=>u.name===name && u.passHash===passHash);
    if(!found){ alert('არასწორი მონაცემები'); return; }
    currentUser = {name, admin:false};
  }
  sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
  document.getElementById('auth-area').style.display='none';
  renderNav(); applyAuthState();
  alert('მოგესალმებით, '+currentUser.name);
}

function logout(){
  currentUser = null;
  sessionStorage.removeItem('currentUser');
  renderNav(); applyAuthState();
}

/* Reviews */
function getReviews(){ return JSON.parse(localStorage.getItem('reviews') || '[]'); }
function setReviews(r){ localStorage.setItem('reviews', JSON.stringify(r)); }

function escapeHtml(s){ return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

function renderReviews(){
  const holder = document.getElementById('reviews-list');
  const countEl = document.getElementById('reviews-count');
  holder.innerHTML = '';
  const list = getReviews().slice().sort((a,b)=>b.ts-a.ts);
  countEl.textContent = list.length;
  if(list.length===0){ holder.innerHTML = '<div style=\"color:var(--muted)\">ჯერ არ არის შეფასებები — იყავით პირველი ⭐</div>'; return; }
  for(const r of list){
    const div = document.createElement('div');
    div.className='comment-item';
    div.innerHTML = `<strong>${escapeHtml(r.user)}</strong> <div style="color:var(--muted);font-size:0.9rem">${new Date(r.ts).toLocaleString()}</div><div style="margin-top:6px">${escapeHtml(r.text)}</div>`;
    holder.appendChild(div);
  }
}

function addReview(){
  if(!currentUser){ alert('შეფასების დასაწერად გაიარეთ ავტორიზაცია'); return; }
  const text = document.getElementById('reviewtext').value.trim();
  if(!text){ alert('ტექსტი ცარიელია'); return; }
  const list = getReviews();
  list.push({id:Date.now(), user:currentUser.name, text, ts:Date.now()});
  setReviews(list);
  document.getElementById('reviewtext').value='';
  renderReviews();
}

/* Messages */
function getMsgs(){ return JSON.parse(localStorage.getItem('messages') || '[]'); }
function setMsgs(m){ localStorage.setItem('messages', JSON.stringify(m)); }

function sendMessage(){
  if(!currentUser){ alert('შეტყობინების დასაგზავნად გაიარეთ ავტორიზაცია'); return; }
  const text = document.getElementById('chat-input').value.trim();
  if(!text) return;
  const msgs = getMsgs();
  msgs.push({id:Date.now(), from: currentUser.name, text, reply:'', ts:Date.now()});
  setMsgs(msgs);
  document.getElementById('chat-input').value='';
  renderChat();
  alert('შეტყობინება გაგზავნილია!');
}

function renderChat(){
  const box = document.getElementById('chat-messages');
  const mode = document.getElementById('chat-mode');
  box.innerHTML = '';
  const msgs = getMsgs().slice().sort((a,b)=>b.ts-a.ts);
  if(currentUser?.admin){
    mode.textContent = 'ადმინის რეჟიმი';
    if(msgs.length===0){ box.innerHTML = '<div style=\"color:var(--muted);padding:8px\">ჯერ არ არის შეტყობინებები</div>'; }
    for(const m of msgs){
      const uDiv = document.createElement('div');
      uDiv.className='message user';
      uDiv.innerHTML = `<strong>${escapeHtml(m.from)}</strong><div style="font-size:0.85rem;color:var(--muted)">${new Date(m.ts).toLocaleString()}</div><div style="margin-top:6px">${escapeHtml(m.text)}</div>`;
      box.appendChild(uDiv);

      const replyWrap = document.createElement('div'); replyWrap.style.marginTop='6px';
      const input = document.createElement('input'); input.placeholder='პასუხი...'; input.value = m.reply || ''; input.style.width='100%'; input.style.padding='8px'; input.style.border='1px solid #eee'; input.style.borderRadius='8px';
      const btn = document.createElement('button'); btn.className='submit-btn'; btn.textContent='პასუხი'; btn.style.marginTop='6px';
      btn.onclick = ()=>{ m.reply = input.value; setMsgs(msgs); renderChat(); };
      replyWrap.appendChild(input); replyWrap.appendChild(btn); box.appendChild(replyWrap);

      if(m.reply){
        const adminResp = document.createElement('div'); adminResp.className='message admin'; adminResp.style.marginTop='8px';
        adminResp.innerHTML = `<strong>Admin</strong><div style="margin-top:6px">${escapeHtml(m.reply)}</div>`; box.appendChild(adminResp);
      }
    }
  } else {
    mode.textContent = currentUser ? 'მომხმარებლის რეჟიმი' : 'სტუმარი';
    box.innerHTML = '<div style=\"color:var(--muted);padding:8px\">მხოლოდ გაგზავნაა შესაძლებელი. ისტორია ჩანს მხოლოდ ადმინს.</div>';
  }
}

/* UI helpers */
function toggleChat(){ const cb = document.getElementById('chat-box'); cb.style.display = cb.style.display==='block' ? 'none' : 'block'; renderChat(); }
function toggleExpandable(id){ const el = document.getElementById(id); if(!el) return; el.style.display = (getComputedStyle(el).display === 'none') ? 'block' : 'none'; }

/* Price buttons */
function initPriceButtons(){ document.querySelectorAll('.price-btn').forEach(btn=>{ btn.addEventListener('click', ()=>{ const id = btn.getAttribute('data-target'); const el = document.getElementById(id); if(!el) return; el.style.display = (getComputedStyle(el).display==='none') ? 'block' : 'none'; if(getComputedStyle(el).display!=='none') el.scrollIntoView({behavior:'smooth', block:'center'}); }); }); }

/* Apply auth state */
function applyAuthState(){ const canWrite = !!currentUser; document.getElementById('review-submit').disabled = !canWrite; document.getElementById('reviewtext').disabled = !canWrite; document.getElementById('reviewtext').placeholder = canWrite ? 'თქვენი შეფასება' : 'თქვენი შეფასება (საჭიროა ავტორიზაცია)'; document.getElementById('review-hint').style.display = canWrite ? 'none' : 'block'; renderNav(); renderReviews(); renderChat(); }

/* Init */
window.addEventListener('DOMContentLoaded', ()=>{
  renderNav(); initPriceButtons(); applyAuthState();
  // handle hero fallback
  const hero = document.getElementById('heroVideo'); if(hero && hero.style.display==='none'){ /* nothing */ }
});

</script>
</body>
</html>
